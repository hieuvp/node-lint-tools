language: node_js

node_js:
  # Latest stable Node.js release
  - node
  # Latest LTS Node.js release
  - lts/*

notifications:
  # Build failed will send a spamming email, better turn it off
  email: false

before_install:
  - npm install --global npm@latest
  - npm --version

install:
  # Similar to npm-install,
  # except it's meant to be used in automated environments
  # such as test platforms, continuous integration, and deployment
  - npm ci

# Keep the npm cache around to speed up installs
cache:
  directories:
    - $HOME/.npm

# Define build stages
jobs:
  include:
    # Stage name: lint
    - stage: lint
      script: npm run lint:ci
    # Stage name: test
    - stage: test
      script: npm run test:ci

# Specify stage order and conditions
stages:
  - lint
  - test
